# 🔧 思维导图插件故障排除指南

## 🚨 常见问题及解决方案

### 1. 插件无法自动抓取网页内容

#### 问题症状
- 打开插件后显示"正在获取网页信息..."
- 状态显示"获取网页内容失败"
- 无法生成思维导图

#### 可能原因及解决方案

##### 原因1：权限不足
**症状**：控制台显示权限错误
**解决方案**：
1. 右键点击插件图标 → 管理扩展程序
2. 确保以下权限已启用：
   - `activeTab` - 访问当前标签页
   - `scripting` - 在页面中执行脚本
   - `tabs` - 管理标签页
3. 重新加载插件

##### 原因2：特殊页面限制
**症状**：在chrome://、chrome-extension://等页面无法工作
**解决方案**：
- 在普通网页（如新闻网站、博客等）上使用插件
- 避免在浏览器内部页面使用

##### 原因3：页面加载不完整
**症状**：页面还在加载时就尝试抓取内容
**解决方案**：
1. 等待页面完全加载完成
2. 点击🔄按钮重新抓取内容
3. 刷新页面后重试

##### 原因4：内容安全策略(CSP)限制
**症状**：某些网站阻止脚本执行
**解决方案**：
1. 尝试在其他网站上使用
2. 使用手动输入模式（点击📝按钮）

### 2. 后端服务连接失败

#### 问题症状
- 显示"无法连接到服务器"
- 生成思维导图时出现网络错误

#### 解决方案
1. **检查后端服务**：
   ```bash
   cd backend
   npm start
   ```
   确保服务运行在 `http://localhost:3001`

2. **检查API密钥**：
   - 确保 `backend/.env` 文件中有 `DEEPSEEK_API_KEY`
   - 验证API密钥是否有效

3. **检查网络连接**：
   - 确保本地网络正常
   - 检查防火墙设置

### 3. 思维导图生成失败

#### 问题症状
- 点击生成按钮后无响应
- 显示"生成思维导图失败"

#### 解决方案
1. **检查内容**：
   - 确保有足够的文本内容
   - 避免内容过长（超过5000字符）

2. **检查AI服务**：
   - 验证API密钥配置
   - 检查API配额是否用完

3. **重试操作**：
   - 点击🔄按钮重新抓取内容
   - 重新生成思维导图

### 4. 插件界面显示异常

#### 问题症状
- 界面布局错乱
- 按钮无法点击
- 样式显示异常

#### 解决方案
1. **重新加载插件**：
   - 在 `chrome://extensions/` 页面
   - 点击插件的刷新按钮

2. **清除缓存**：
   - 清除浏览器缓存
   - 重新安装插件

3. **检查文件完整性**：
   - 确保所有文件都存在
   - 重新下载插件文件

## 🔍 调试方法

### 1. 查看控制台日志
1. 右键点击插件图标 → 检查弹出内容
2. 打开开发者工具
3. 查看Console标签页的错误信息

### 2. 检查网络请求
1. 打开开发者工具
2. 切换到Network标签页
3. 尝试生成思维导图
4. 查看API请求状态

### 3. 验证权限
1. 在 `chrome://extensions/` 页面
2. 找到插件详情
3. 检查权限列表

## 📋 检查清单

### 安装前检查
- [ ] Chrome浏览器版本 >= 88
- [ ] 已启用开发者模式
- [ ] 插件文件完整

### 使用前检查
- [ ] 后端服务正在运行
- [ ] API密钥已配置
- [ ] 在普通网页上使用（非chrome://页面）

### 问题排查
- [ ] 检查控制台错误信息
- [ ] 验证网络连接
- [ ] 确认权限设置
- [ ] 尝试重新加载插件

## 🆘 获取帮助

### 收集信息
如果问题仍然存在，请收集以下信息：

1. **浏览器信息**：
   - Chrome版本
   - 操作系统

2. **插件信息**：
   - 插件版本
   - 错误消息截图

3. **页面信息**：
   - 使用的网站URL
   - 页面类型（新闻、博客等）

4. **错误日志**：
   - 控制台错误信息
   - 网络请求状态

### 联系支持
- 提供详细的错误描述
- 附上错误截图
- 说明复现步骤

## 🔄 重置插件

如果所有方法都无效，可以尝试重置插件：

1. **卸载插件**：
   - 在 `chrome://extensions/` 页面
   - 点击"移除"按钮

2. **清除数据**：
   - 清除浏览器缓存
   - 删除插件相关数据

3. **重新安装**：
   - 重新加载插件
   - 重新配置设置

---

💡 **提示**：大多数问题都可以通过重新加载插件或检查权限设置来解决。如果问题持续存在，请检查后端服务是否正常运行。

