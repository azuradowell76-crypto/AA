# 🚀 思维导图导出功能说明

## ✨ 新增功能

在现有思维导图AI问答功能的基础上，新增了**导出功能**，支持将思维导图导出为多种格式：

### 📄 Markdown导出
- **功能**：将思维导图导出为标准的Markdown文件
- **格式**：`.md` 文件
- **特点**：
  - 保持原有的层级结构（# ## ### #### ##### ######）
  - 可直接在Markdown编辑器中打开
  - 支持版本控制和协作编辑
  - 文件大小小，传输方便

### 🖼️ PNG导出
- **功能**：将思维导图导出为高质量PNG图片
- **格式**：`.png` 文件
- **特点**：
  - 高分辨率（1200px宽度）
  - 美观的视觉设计
  - 支持长内容自动调整高度
  - 适合分享、打印和演示

## 🛠️ 安装说明

### 1. 安装后端依赖
```bash
cd backend
npm install puppeteer
```

或者直接运行：
```bash
cd backend
install-deps.bat  # Windows
```

### 2. 启动服务
```bash
# 后端
cd backend
npm start

# 前端（新终端）
cd frontend
npm start
```

## 🎯 使用方法

### 导出Markdown
1. 生成思维导图后，在右侧思维导图区域顶部会显示导出按钮
2. 点击绿色的 **"📄 Markdown"** 按钮
3. 文件会自动下载到默认下载目录
4. 文件名格式：`{标题}.md`

### 导出PNG
1. 生成思维导图后，点击蓝色的 **"🖼️ PNG"** 按钮
2. 系统会调用AI服务生成高质量PNG图片
3. 图片会自动下载到默认下载目录
4. 文件名格式：`{标题}.png`

## 🔧 技术实现

### 前端
- 使用 `axios` 发送导出请求
- 支持 `arraybuffer` 响应类型处理PNG数据
- 自动文件下载功能

### 后端
- 使用 `puppeteer` 无头浏览器生成PNG
- 自定义HTML模板，美观的视觉设计
- 支持动态高度调整
- 优化的图片质量和性能

### PNG生成流程
1. 接收Markdown内容
2. 转换为美观的HTML模板
3. 使用Puppeteer渲染页面
4. 自动调整页面尺寸
5. 生成高质量PNG截图
6. 返回图片数据

## 🎨 视觉设计特点

### 颜色方案
- **一级标题**：蓝色 (#2196f3)
- **二级标题**：紫色 (#9c27b0)
- **三级标题**：绿色 (#4caf50)
- **四级标题**：橙色 (#ff9800)
- **五级标题**：粉色 (#e91e63)
- **六级标题**：深紫色 (#673ab7)

### 布局设计
- 渐变背景
- 圆角卡片设计
- 左侧彩色边框
- 响应式布局
- 优雅的阴影效果

## 📱 兼容性

- **浏览器**：支持所有现代浏览器
- **操作系统**：Windows、macOS、Linux
- **Node.js版本**：建议 16.0.0 或更高版本

## 🚨 注意事项

1. **首次使用PNG导出**：需要下载Chromium浏览器（约200MB），请耐心等待
2. **内存使用**：PNG导出会占用较多内存，建议在性能较好的设备上使用
3. **网络连接**：确保后端服务正常运行
4. **文件权限**：确保有足够的权限创建和下载文件

## 🔄 更新日志

- **v1.1.0**：新增Markdown导出功能
- **v1.1.0**：新增PNG导出功能
- **v1.1.0**：优化视觉设计和用户体验

## 💡 使用建议

1. **Markdown导出**：适合需要进一步编辑或协作的场景
2. **PNG导出**：适合分享、演示或打印的场景
3. **组合使用**：可以同时导出两种格式，满足不同需求

---

🎉 享受您的思维导图导出体验！
